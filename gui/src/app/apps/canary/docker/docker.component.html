<div class="createButton">
  <button mat-raised-button color="primary" (click)="openNewEntryDialog()">
    <mat-icon>add</mat-icon>
    {{ "canary.docker.add" | transloco }}
  </button>
</div>

<table mat-table [dataSource]="data() || []">
  <!-- Identifier -->
  <ng-container matColumnDef="identifier">
    <th mat-header-cell *matHeaderCellDef>{{ "canary.docker.id.name" | transloco }}</th>
    <td mat-cell *matCellDef="let item" (click)="onSelectItem(item)">{{ item.identifier }}</td>
  </ng-container>

  <!-- Tag -->
  <ng-container matColumnDef="tag">
    <th mat-header-cell *matHeaderCellDef>{{ "canary.docker.tag" | transloco }}</th>
    <td mat-cell *matCellDef="let item" (click)="onSelectItem(item)"><mat-chip>{{ item.tag }}</mat-chip></td>
  </ng-container>

  <!-- Tags -->
  <ng-container matColumnDef="tags">
    <th mat-header-cell *matHeaderCellDef>{{ "canary.docker.tags" | transloco }}</th>
    <td mat-cell *matCellDef="let item" (click)="onSelectItem(item)">
      @if (item?.state?.tags; as tags) {
        <mat-chip-set>
          @for (tag of tags; track tag) {
            <mat-chip>{{ tag }}</mat-chip>
          }
        </mat-chip-set>
      }
    </td>
  </ng-container>

  <!-- Last Update -->
  <ng-container matColumnDef="update">
    <th mat-header-cell *matHeaderCellDef>{{ "canary.docker.update" | transloco }}</th>
    <td mat-cell *matCellDef="let item" (click)="onSelectItem(item)">
      {{ item?.state?.recordedAt }}
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
